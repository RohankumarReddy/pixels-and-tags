{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///R:/NextJS/Bigproject/gradkit/actions/user.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function updateUser(data) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  try {\r\n    const result = await db.$transaction(\r\n      async (tx) => {\r\n        // Check if industry exists\r\n        let industryInsight = await tx.industryInsight.findUnique({\r\n          where: {\r\n            industry: data.industry,\r\n          },\r\n        });\r\n\r\n        // If industry doesn't exist, create it with default values\r\n        if (!industryInsight) {\r\n          industryInsight = await tx.industryInsight.create({\r\n            data: {\r\n              industry: data.industry,\r\n              salaryRanges: [],\r\n              growthRate: 0,\r\n              demandLevel: \"Medium\",\r\n              topSkills: [],\r\n              marketOutlook: \"Neutral\",\r\n              keyTrends: [],\r\n              recommendedSkills: [],\r\n              lastUpdated: new Date(),\r\n              nextUpdate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\r\n            },\r\n          });\r\n        }\r\n\r\n        // Update the user\r\n        const updatedUser = await tx.user.update({\r\n          where: { id: user.id },\r\n          data: {\r\n            industry: data.industry,\r\n            experience: data.experience,\r\n            bio: data.bio,\r\n            skills: data.skills,\r\n          },\r\n        });\r\n\r\n        return { updatedUser, industryInsight };\r\n      },\r\n      { timeout: 10000 }\r\n    );\r\n\r\n    return { success: true, ...result };\r\n  } catch (error) {\r\n    console.error(\"Error updating user and industry:\", error.message);\r\n    throw new Error(\"Failed to update profile: \" + error.message);\r\n  }\r\n}\r\n\r\nexport async function getUserOnboardingStatus() {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  try {\r\n    const userData = await db.user.findUnique({\r\n      where: { clerkUserId: userId },\r\n      select: { industry: true },\r\n    });\r\n\r\n    return { isOnboarded: !!userData?.industry };\r\n  } catch (error) {\r\n    console.error(\"Error checking onboarding status:\", error);\r\n    throw new Error(\"Failed to check onboarding status\");\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AACA;;;;;;;;;;;AAEO,eAAe,WAAW,IAAI;IACnC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,IAAI;QACF,MAAM,SAAS,MAAM,mHAAE,CAAC,YAAY,CAClC,OAAO;YACL,2BAA2B;YAC3B,IAAI,kBAAkB,MAAM,GAAG,eAAe,CAAC,UAAU,CAAC;gBACxD,OAAO;oBACL,UAAU,KAAK,QAAQ;gBACzB;YACF;YAEA,2DAA2D;YAC3D,IAAI,CAAC,iBAAiB;gBACpB,kBAAkB,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC;oBAChD,MAAM;wBACJ,UAAU,KAAK,QAAQ;wBACvB,cAAc,EAAE;wBAChB,YAAY;wBACZ,aAAa;wBACb,WAAW,EAAE;wBACb,eAAe;wBACf,WAAW,EAAE;wBACb,mBAAmB,EAAE;wBACrB,aAAa,IAAI;wBACjB,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;oBACvD;gBACF;YACF;YAEA,kBAAkB;YAClB,MAAM,cAAc,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBACvC,OAAO;oBAAE,IAAI,KAAK,EAAE;gBAAC;gBACrB,MAAM;oBACJ,UAAU,KAAK,QAAQ;oBACvB,YAAY,KAAK,UAAU;oBAC3B,KAAK,KAAK,GAAG;oBACb,QAAQ,KAAK,MAAM;gBACrB;YACF;YAEA,OAAO;gBAAE;gBAAa;YAAgB;QACxC,GACA;YAAE,SAAS;QAAM;QAGnB,OAAO;YAAE,SAAS;YAAM,GAAG,MAAM;QAAC;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC,MAAM,OAAO;QAChE,MAAM,IAAI,MAAM,+BAA+B,MAAM,OAAO;IAC9D;AACF;AAEO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,IAAI;QACF,MAAM,WAAW,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,aAAa;YAAO;YAC7B,QAAQ;gBAAE,UAAU;YAAK;QAC3B;QAEA,OAAO;YAAE,aAAa,CAAC,CAAC,UAAU;QAAS;IAC7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM,IAAI,MAAM;IAClB;AACF;;;IAlFsB;IA6DA;;AA7DA,+OAAA;AA6DA,+OAAA","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///R:/NextJS/Bigproject/gradkit/app/%28main%29/dashboard/page.jsx"],"sourcesContent":["import { getUserOnboardingStatus } from \"@/actions/user\";\r\nimport { redirect } from \"next/navigation\";\r\nimport React from \"react\";\r\n\r\nconst IndustryInsightsPage = async () => {\r\n  const { isOnboarded } = await getUserOnboardingStatus();\r\n\r\n  if (!isOnboarded) {\r\n    redirect(\"/onboarding\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold\">Industry Insights</h1>\r\n      <p>Welcome to the insights page!</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IndustryInsightsPage;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;;;;;;;;;AAEA,MAAM,uBAAuB;IAC3B,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,IAAA,0IAAuB;IAErD,IAAI,CAAC,aAAa;QAChB,IAAA,iMAAQ,EAAC;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqB;;;;;;0BACnC,8OAAC;0BAAE;;;;;;;;;;;;AAGT;uCAEe","debugId":null}}]
}
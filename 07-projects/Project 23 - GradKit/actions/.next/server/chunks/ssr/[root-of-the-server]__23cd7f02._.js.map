{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///R:/NextJS/Bigproject/gradkit/actions/resume.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\nconst model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\nexport async function saveResume(content) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  try {\r\n    const resume = await db.resume.upsert({\r\n      where: {\r\n        userId: user.id,\r\n      },\r\n      update: {\r\n        content,\r\n      },\r\n      create: {\r\n        userId: user.id,\r\n        content,\r\n      },\r\n    });\r\n\r\n    revalidatePath(\"/resume\");\r\n    return resume;\r\n  } catch (error) {\r\n    console.error(\"Error saving resume:\", error);\r\n    throw new Error(\"Failed to save resume\");\r\n  }\r\n}\r\n\r\nexport async function getResume() {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  return await db.resume.findUnique({\r\n    where: {\r\n      userId: user.id,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function improveWithAI({ current, type }) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n    include: {\r\n      industryInsight: true,\r\n    },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  const prompt = `\r\nYou are an expert resume writer and career coach. \r\nYour task is to improve the following ${type} description for a ${user.industry} professional. \r\nEnhance it to be **impactful, concise, and results-driven**, highlighting achievements, technical skills, and industry relevance.\r\n\r\nCurrent content: \"${current}\"\r\n\r\nInstructions:\r\n1. Start with strong action verbs.\r\n2. Quantify achievements wherever possible (numbers, percentages, metrics).\r\n3. Emphasize skills and accomplishments over duties.\r\n4. Align language with industry standards and keywords.\r\n5. Keep it professional, concise, and easy to read.\r\n6. Format the output as **a single polished paragraph**, without explanations or extra commentary.\r\n\r\nReturn only the improved description.\r\n`;\r\n\r\n  try {\r\n    const result = await model.generateContent(prompt);\r\n    const response = result.response;\r\n    const improvedContent = response.text().trim();\r\n    return improvedContent;\r\n  } catch (error) {\r\n    console.error(\"Error improving content:\", error);\r\n    throw new Error(\"Failed to improve content\");\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,MAAM,QAAQ,IAAI,oLAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AAC/D,MAAM,QAAQ,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAE5D,eAAe,WAAW,OAAO;IACtC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,IAAI;QACF,MAAM,SAAS,MAAM,mHAAE,CAAC,MAAM,CAAC,MAAM,CAAC;YACpC,OAAO;gBACL,QAAQ,KAAK,EAAE;YACjB;YACA,QAAQ;gBACN;YACF;YACA,QAAQ;gBACN,QAAQ,KAAK,EAAE;gBACf;YACF;QACF;QAEA,IAAA,+IAAc,EAAC;QACf,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,OAAO,MAAM,mHAAE,CAAC,MAAM,CAAC,UAAU,CAAC;QAChC,OAAO;YACL,QAAQ,KAAK,EAAE;QACjB;IACF;AACF;AAEO,eAAe,cAAc,EAAE,OAAO,EAAE,IAAI,EAAE;IACnD,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;QAC7B,SAAS;YACP,iBAAiB;QACnB;IACF;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,SAAS,CAAC;;sCAEoB,EAAE,KAAK,mBAAmB,EAAE,KAAK,QAAQ,CAAC;;;kBAG9D,EAAE,QAAQ;;;;;;;;;;;AAW5B,CAAC;IAEC,IAAI;QACF,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,OAAO,QAAQ;QAChC,MAAM,kBAAkB,SAAS,IAAI,GAAG,IAAI;QAC5C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM;IAClB;AACF;;;IAzFsB;IAgCA;IAiBA;;AAjDA,+OAAA;AAgCA,+OAAA;AAiBA,+OAAA","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///R:/NextJS/Bigproject/gradkit/app/%28main%29/resume/page.jsx"],"sourcesContent":["import React from 'react'\r\nimport { getResume } from '@/actions/resume'\r\n  const ResumePage = async()=>{\r\n    const resume =await getResume()\r\n\r\n\r\n  return (\r\n    <div>\r\n      <ResumePageBuilder />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default ResumePage\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AACE,MAAM,aAAa;IACjB,MAAM,SAAQ,MAAM,IAAA,8HAAS;IAG/B,qBACE,8OAAC;kBACC,cAAA,8OAAC;;;;;;;;;;AAGP;uCAGe","debugId":null}}]
}